/* pica 1.1.1 nodeca/pica */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n;n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,n.pica=e()}}(function(){return function e(n,t,r){function o(a,u){if(!t[a]){if(!n[a]){var f="function"==typeof require&&require;if(!u&&f)return f(a,!0);if(i)return i(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=t[a]={exports:{}};n[a][0].call(c.exports,function(e){var t=n[a][1][e];return o(t?t:e)},c,c.exports,e,n,t,r)}return t[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,n,t){"use strict";function r(e){return 0>e?0:e>255?255:e}function o(e){return Math.floor(e*v)}function i(e,n,t){var r,i,a,u,f,l,c,s,v,d,g,m,_,p,x,E,b,w=h[e].filter,T=t/n,R=1/T,y=Math.min(1,T),z=h[e].win/y,S=Math.floor(2*(z+1)),A=new Int16Array((S+2)*t),F=0;for(r=0;t>r;r++){for(i=(r+.5)*R,a=Math.max(0,Math.floor(i-z)),u=Math.min(n-1,Math.ceil(i+z)),f=u-a+1,l=new Float32Array(f),c=new Int16Array(f),s=0,d=a,g=0;u>=d;d++,g++)m=w((d+.5-i)*y),s+=m,l[g]=m;for(v=0,g=0;g<l.length;g++)_=o(l[g]/s),v+=_,c[g]=_;for(c[t>>1]+=o(1)-v,p=0;p<c.length&&0===c[p];)p++;if(p<c.length){for(x=c.length-1;x>0&&0===c[x];)x--;E=a+p,b=x-p+1,A[F++]=E,A[F++]=b,A.set(c.subarray(p,x+1),F),F+=b}else A[F++]=0,A[F++]=0}return A}function a(e,n,t,o,i,a){var u,f,l,c,s,v,h,d,g,m,_,p=0,x=0;for(g=0;o>g;g++){for(s=0,m=0;i>m;m++){for(v=a[s++],h=a[s++],d=p+4*v|0,u=f=l=c=0;h>0;h--)_=a[s++],c=c+_*e[d+3]|0,l=l+_*e[d+2]|0,f=f+_*e[d+1]|0,u=u+_*e[d]|0,d=d+4|0;n[x+3]=r(c+8192>>14),n[x+2]=r(l+8192>>14),n[x+1]=r(f+8192>>14),n[x]=r(u+8192>>14),x=x+4*o|0}x=4*(g+1)|0,p=(g+1)*t*4|0}}function u(e,n,t,o,i,a){var u,f,l,c,s,v,h,d,g,m,_,p=0,x=0;for(g=0;o>g;g++){for(s=0,m=0;i>m;m++){for(v=a[s++],h=a[s++],d=p+4*v|0,u=f=l=c=0;h>0;h--)_=a[s++],c=c+_*e[d+3]|0,l=l+_*e[d+2]|0,f=f+_*e[d+1]|0,u=u+_*e[d]|0,d=d+4|0;n[x+3]=r(c+8192>>14),n[x+2]=r(l+8192>>14),n[x+1]=r(f+8192>>14),n[x]=r(u+8192>>14),x=x+4*o|0}x=4*(g+1)|0,p=(g+1)*t*4|0}}function f(e,n,t){for(var r=3,o=n*t*4|0;o>r;)e[r]=255,r=r+4|0}function l(e){var n=e.src,t=e.width,r=e.height,o=e.toWidth,l=e.toHeight,s=e.dest||new Uint8Array(o*l*4),v="undefined"==typeof e.quality?3:e.quality,h=e.alpha||!1,d="undefined"==typeof e.unsharpAmount?0:0|e.unsharpAmount,g="undefined"==typeof e.unsharpRadius?0:e.unsharpRadius,m="undefined"==typeof e.unsharpThreshold?0:0|e.unsharpThreshold;if(1>t||1>r||1>o||1>l)return[];var _=i(v,t,o),p=i(v,r,l),x=new Uint8Array(o*r*4);return a(n,x,t,r,o,_),u(x,s,r,o,l,p),h||f(s,o,l),d&&c(s,o,l,d,g,m),s}var c=e("./unsharp"),s=14,v=1<<s,h=[{win:.5,filter:function(e){return e>=-.5&&.5>e?1:0}},{win:1,filter:function(e){if(-1>=e||e>=1)return 0;if(e>-1.1920929e-7&&1.1920929e-7>e)return 1;var n=e*Math.PI;return Math.sin(n)/n*(.54+.46*Math.cos(n/1))}},{win:2,filter:function(e){if(-2>=e||e>=2)return 0;if(e>-1.1920929e-7&&1.1920929e-7>e)return 1;var n=e*Math.PI;return Math.sin(n)/n*Math.sin(n/2)/(n/2)}},{win:3,filter:function(e){if(-3>=e||e>=3)return 0;if(e>-1.1920929e-7&&1.1920929e-7>e)return 1;var n=e*Math.PI;return Math.sin(n)/n*Math.sin(n/3)/(n/3)}}];n.exports=l},{"./unsharp":2}],2:[function(e,n,t){"use strict";function r(e,n,t){for(var r,o,i,a,u,f=n*t,l=new Uint16Array(f),c=0;f>c;c++)r=e[4*c],o=e[4*c+1],i=e[4*c+2],u=r>=o&&r>=i?r:o>=i&&o>=r?o:i,a=o>=r&&i>=r?r:i>=o&&r>=o?o:i,l[c]=257*(u+a)>>1;return l}function o(e,n,t,o,a,u){var f,l,c,s,v,h,d,g,m,_,p,x,E;if(!(0===o||.5>a)){var b=r(e,n,t),w=new Uint16Array(b);i(w,n,t,a);for(var T=o/100*4096+.5|0,R=257*u|0,y=n*t,z=0;y>z;z++)x=2*(b[z]-w[z]),Math.abs(x)>=R&&(E=4*z,f=e[E],l=e[E+1],c=e[E+2],g=f>=l&&f>=c?f:l>=f&&l>=c?l:c,d=l>=f&&c>=f?f:f>=l&&c>=l?l:c,h=257*(g+d)>>1,d===g?s=v=0:(v=32767>=h?4095*(g-d)/(g+d)|0:4095*(g-d)/(510-g-d)|0,s=f===g?65535*(l-c)/(6*(g-d))|0:l===g?21845+(65535*(c-f)/(6*(g-d))|0):43690+(65535*(f-l)/(6*(g-d))|0)),h+=T*x+2048>>12,h>65535?h=65535:0>h&&(h=0),0===v?f=l=c=h>>8:(_=32767>=h?h*(4096+v)+2048>>12:h+((65535-h)*v+2048>>12),m=2*h-_>>8,_>>=8,p=s+21845&65535,f=p>=43690?m:p>=32767?m+(6*(_-m)*(43690-p)+32768>>16):p>=10922?_:m+(6*(_-m)*p+32768>>16),p=65535&s,l=p>=43690?m:p>=32767?m+(6*(_-m)*(43690-p)+32768>>16):p>=10922?_:m+(6*(_-m)*p+32768>>16),p=s-21845&65535,c=p>=43690?m:p>=32767?m+(6*(_-m)*(43690-p)+32768>>16):p>=10922?_:m+(6*(_-m)*p+32768>>16)),e[E]=f,e[E+1]=l,e[E+2]=c)}}var i=e("glur/mono16");n.exports=o,n.exports.lightness=r},{"glur/mono16":6}],3:[function(e,n,t){"use strict";var r=e("./pure/resize");n.exports=function(e,n){var t=r(e);n(null,t)}},{"./pure/resize":1}],4:[function(e,n,t){"use strict";function r(e){try{(window.console.error||window.console.log).call(window.console,e)}catch(n){}}function o(e){var n=e.getError();if(n!==e.NO_ERROR)throw new Error("gl error "+n)}function i(e){return e.getContext("webgl")||e.getContext("experimental-webgl")}function a(e,n,t){var o=e.createShader(n);return e.shaderSource(o,t),e.compileShader(o),e.getShaderParameter(o,e.COMPILE_STATUS)?o:(r("Shader compile error: "+e.getShaderInfoLog(o)+". Source: `"+t+"`"),e.deleteShader(o),null)}function u(e,n,t){var i=a(e,e.VERTEX_SHADER,x[n]),u=a(e,e.FRAGMENT_SHADER,x[t]),f=e.createProgram();return e.attachShader(f,i),e.attachShader(f,u),e.linkProgram(f),e.getProgramParameter(f,e.LINK_STATUS)||(r("Program linking error: "+e.getProgramInfoLog(f)),e.deleteProgram(f)),o(e),f}function f(e,n,t,r,i){var a=e.getAttribLocation(n,t);e.bindBuffer(e.ARRAY_BUFFER,e.createBuffer()),e.bufferData(e.ARRAY_BUFFER,new Float32Array(r),e.STATIC_DRAW),e.enableVertexAttribArray(a),e.vertexAttribPointer(a,i.elementSize,e.FLOAT,!1,0,0),o(e)}function l(e,n,t){var r=e.createTexture();return e.activeTexture(e.TEXTURE0+n),e.bindTexture(e.TEXTURE_2D,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t),o(e),r}function c(e,n,t,r){var o=e.getUniformLocation(n,t);e.uniform1i(o,r)}function s(e,n,t,r){var o=e.getUniformLocation(n,t);e.uniform1f(o,r)}function v(e,n,t,r,o){var i=e.getUniformLocation(n,t);e.uniform2f(i,r,o)}function h(e,n,t,r){var o=e,i=e+t,a=n,u=n+r;return[o,a,i,a,o,u,o,u,i,a,i,u]}function d(e,n,t,r){var i=e.createTexture();return e.activeTexture(e.TEXTURE0+n),e.bindTexture(e.TEXTURE_2D,i),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t,r,0,e.RGBA,e.UNSIGNED_BYTE,null),o(e),i}function g(e,n,t,r){var i=d(e,n,t,r),a=e.getParameter(e.FRAMEBUFFER_BINDING),u=e.createFramebuffer();return e.bindFramebuffer(e.FRAMEBUFFER,u),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,i,0),o(e),{fbo:u,texture:i,oldFbo:a}}function m(e,n,t,r,i,a,l,d,m){var _=u(e,"#vsh-basic",a);e.useProgram(_),s(e,_,"u_winSize",l),c(e,_,"u_image",n),v(e,_,"u_imageSize",t,r),v(e,_,"u_resolution",d,m),f(e,_,"a_texCoord",[0,0,1,0,0,1,0,1,1,0,1,1],{elementSize:2}),f(e,_,"a_position",h(0,0,d,m),{elementSize:2}),e.viewport(0,0,d,m);var p=g(e,i,d,m);return e.viewport(0,0,d,m),e.drawArrays(e.TRIANGLES,0,6),e.bindFramebuffer(e.FRAMEBUFFER,p.oldFbo),o(e),p}function _(e,n,t){var r=e.width,o=e.height,i=n.canvas.width,a=n.canvas.height;n.viewport(0,0,i,a);var u=0;l(n,u,e);var f="undefined"==typeof t.quality?3:t.quality,c=2,s=3;m(n,u,r,o,c,E[f].horizontal,E[f].win,i,o);var v=m(n,c,i,o,s,E[f].vertical,E[f].win,i,a);n.flush();var h=n.createFramebuffer();n.bindFramebuffer(n.FRAMEBUFFER,h),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,v.texture,0);var d=n.checkFramebufferStatus(n.FRAMEBUFFER);if(d!==n.FRAMEBUFFER_COMPLETE)throw new Error("Bad framebuffer status: "+d);var g=new Uint8Array(i*a*4);n.readPixels(0,0,i,a,n.RGBA,n.UNSIGNED_BYTE,g);var _="undefined"==typeof t.unsharpAmount?0:0|t.unsharpAmount,x="undefined"==typeof t.unsharpRadius?0:t.unsharpRadius,b="undefined"==typeof t.unsharpThreshold?0:0|t.unsharpThreshold;_&&p(g,i,a,_,x,b);var w;if(!t.alpha)for(w=g.length-1;w>0;w-=4)g[w]=255;var T,R,y,z=new Uint8Array(g.length);for(T=a-1;T>=0;T--)for(R=T*i<<2,y=(a-1-T)*i<<2,w=i-1;w>=0;w--)z[R]=g[y],z[R+1]=g[y+1],z[R+2]=g[y+2],z[R+3]=g[y+3],R+=4,y+=4;return z}var p=e("./pure/unsharp"),x={};x["#vsh-basic"]="precision highp float;\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\n\nuniform vec2 u_resolution;\n\nvarying vec2 v_texCoord;\n\nvoid main() {\n   vec2 clipSpace = a_position / u_resolution * 2.0 - 1.0;\n\n   gl_Position = vec4(clipSpace, 0, 1);\n   v_texCoord = a_texCoord;\n}\n",x["#fsh-box-1d-covolve-horizontal"]="precision highp float;\nuniform vec2 u_resolution;\nuniform sampler2D u_image;\nuniform vec2 u_imageSize;\nuniform float u_winSize;\n\nvarying vec2 v_texCoord;\n\n#define sinc(a) (sin(a)/a)\n#define M_PI 3.1415926535897932384626433832795\n\nvoid main() {\n  vec2 pixel = vec2(1.) / u_imageSize;\n  gl_FragColor = vec4(0.);\n\n  float total = 0.;\n  float scale = u_imageSize.x / u_resolution.x;\n  float count = u_winSize * scale * 2.;\n  for (int i = 0; i < 1024*8; i++) {\n    if (float(i) >= count) {\n      break;\n    }\n    float k = float(i) - (count / 2.);\n    vec2 offset = vec2(pixel.x * k, 0.);\n    vec4 c = texture2D(u_image, v_texCoord+offset);\n    float x = k / scale; // max [-3, 3]\n    float b = (x >= -0.5 && x < 0.5) ? 1.0 : 0.0;\n    if (x > -1.19209290E-07 && x < 1.19209290E-07) { \n      b = 1.;\n    }\n    total += b;\n    c *= vec4(b);\n    gl_FragColor += c;\n  }\n  gl_FragColor /= vec4(total);\n}\n",x["#fsh-box-1d-covolve-vertical"]="precision highp float;\nuniform vec2 u_resolution;\nuniform sampler2D u_image;\nuniform vec2 u_imageSize;\nuniform float u_winSize;\n\nvarying vec2 v_texCoord;\n\n#define sinc(a) (sin(a)/a)\n#define M_PI 3.1415926535897932384626433832795\n\nvoid main() {\n  vec2 pixel = vec2(1.) / u_imageSize;\n  gl_FragColor = vec4(0.);\n\n  float total = 0.;\n  float scale = u_imageSize.y / u_resolution.y;\n  float count = u_winSize * scale * 2.;\n  for (int i = 0; i < 1024*8; i++) {\n    if (float(i) >= count) {\n      break;\n    }\n    float k = float(i) - (count / 2.);\n    vec2 offset = vec2(0., pixel.y * k);\n    vec4 c = texture2D(u_image, v_texCoord+offset);\n    float x = k / scale; // max [-3, 3]\n    float b = (x >= -0.5 && x < 0.5) ? 1.0 : 0.0;\n    if (x > -1.19209290E-07 && x < 1.19209290E-07) { \n      b = 1.;\n    }\n    total += b;\n    c *= vec4(b);\n    gl_FragColor += c;\n  }\n  gl_FragColor /= vec4(total);\n}\n",x["#fsh-hamming-1d-covolve-horizontal"]="precision highp float;\nuniform vec2 u_resolution;\nuniform sampler2D u_image;\nuniform vec2 u_imageSize;\nuniform float u_winSize;\n\nvarying vec2 v_texCoord;\n\n#define sinc(a) (sin(a)/a)\n#define M_PI 3.1415926535897932384626433832795\n\nvoid main() {\n  vec2 pixel = vec2(1.) / u_imageSize;\n  gl_FragColor = vec4(0.);\n\n  float total = 0.;\n  float scale = u_imageSize.x / u_resolution.x;\n  float count = u_winSize * scale * 2.;\n  for (int i = 0; i < 1024*8; i++) {\n    if (float(i) >= count) {\n      break;\n    }\n    float k = float(i) - (count / 2.);\n    vec2 offset = vec2(pixel.x * k, 0.);\n    vec4 c = texture2D(u_image, v_texCoord+offset);\n    float x = k / scale; // max [-3, 3]\n    float xpi = x * M_PI;\n    float b = sinc(xpi) * (0.54 + 0.46 * cos(xpi));\n    if (x > -1.19209290E-07 && x < 1.19209290E-07) { \n      b = 1.;\n    }\n    total += b;\n    c *= vec4(b);\n    gl_FragColor += c;\n  }\n  gl_FragColor /= vec4(total);\n}\n",x["#fsh-hamming-1d-covolve-vertical"]="precision highp float;\nuniform vec2 u_resolution;\nuniform sampler2D u_image;\nuniform vec2 u_imageSize;\nuniform float u_winSize;\n\nvarying vec2 v_texCoord;\n\n#define sinc(a) (sin(a)/a)\n#define M_PI 3.1415926535897932384626433832795\n\nvoid main() {\n  vec2 pixel = vec2(1.) / u_imageSize;\n  gl_FragColor = vec4(0.);\n\n  float total = 0.;\n  float scale = u_imageSize.y / u_resolution.y;\n  float count = u_winSize * scale * 2.;\n  for (int i = 0; i < 1024*8; i++) {\n    if (float(i) >= count) {\n      break;\n    }\n    float k = float(i) - (count / 2.);\n    vec2 offset = vec2(0., pixel.y * k);\n    vec4 c = texture2D(u_image, v_texCoord+offset);\n    float x = k / scale; // max [-3, 3]\n    float xpi = x * M_PI;\n    float b = sinc(xpi) * (0.54 + 0.46 * cos(xpi));\n     if (x > -1.19209290E-07 && x < 1.19209290E-07) { \n      b = 1.;\n    }\n    total += b;\n    c *= vec4(b);\n    gl_FragColor += c;\n  }\n  gl_FragColor /= vec4(total);\n}\n",x["#fsh-lanczos-1d-covolve-horizontal"]="precision highp float;\nuniform vec2 u_resolution;\nuniform sampler2D u_image;\nuniform vec2 u_imageSize;\nuniform float u_winSize;\n\nvarying vec2 v_texCoord;\n\n#define sinc(a) (sin(a)/a)\n#define M_PI 3.1415926535897932384626433832795\n\nvoid main() {\n  vec2 pixel = vec2(1.) / u_imageSize;\n  gl_FragColor = vec4(0.);\n\n  float total = 0.;\n  float scale = u_imageSize.x / u_resolution.x;\n  float count = u_winSize * scale * 2.;\n  for (int i = 0; i < 1024*8; i++) {\n    if (float(i) >= count) {\n      break;\n    }\n    float k = float(i) - (count / 2.);\n    vec2 offset = vec2(pixel.x * k, 0.);\n    vec4 c = texture2D(u_image, v_texCoord+offset);\n    float x = k / scale; // max [-3, 3]\n    float xpi = x * M_PI;\n    float b = sinc(xpi) * sinc(xpi / u_winSize);\n    if (x > -1.19209290E-07 && x < 1.19209290E-07) { \n      b = 1.;\n    }\n    total += b;\n    c *= vec4(b);\n    gl_FragColor += c;\n  }\n  gl_FragColor /= vec4(total);\n}\n",x["#fsh-lanczos-1d-covolve-vertical"]="precision highp float;\nuniform vec2 u_resolution;\nuniform sampler2D u_image;\nuniform vec2 u_imageSize;\nuniform float u_winSize;\n\nvarying vec2 v_texCoord;\n\n#define sinc(a) (sin(a)/a)\n#define M_PI 3.1415926535897932384626433832795\n\nvoid main() {\n  vec2 pixel = vec2(1.) / u_imageSize;\n  gl_FragColor = vec4(0.);\n\n  float total = 0.;\n  float scale = u_imageSize.y / u_resolution.y;\n  float count = u_winSize * scale * 2.;\n  for (int i = 0; i < 1024*8; i++) {\n    if (float(i) >= count) {\n      break;\n    }\n    float k = float(i) - (count / 2.);\n    vec2 offset = vec2(0., pixel.y * k);\n    vec4 c = texture2D(u_image, v_texCoord+offset);\n    float x = k / scale; // max [-3, 3]\n    float xpi = x * M_PI;\n    float b = sinc(xpi) * sinc(xpi / u_winSize);\n    if (x > -1.19209290E-07 && x < 1.19209290E-07) { \n      b = 1.;\n    }\n    total += b;\n    c *= vec4(b);\n    gl_FragColor += c;\n  }\n  gl_FragColor /= vec4(total);\n}\n";var E=[{win:.5,horizontal:"#fsh-box-1d-covolve-horizontal",vertical:"#fsh-box-1d-covolve-vertical"},{win:1,horizontal:"#fsh-hamming-1d-covolve-horizontal",vertical:"#fsh-hamming-1d-covolve-vertical"},{win:2,horizontal:"#fsh-lanczos-1d-covolve-horizontal",vertical:"#fsh-lanczos-1d-covolve-vertical"},{win:3,horizontal:"#fsh-lanczos-1d-covolve-horizontal",vertical:"#fsh-lanczos-1d-covolve-vertical"}];n.exports=function(e,n,t,o){var a,u;try{u=document.createElement("canvas"),u.id="pica-webgl-temporarry-canvas",u.height=n.height,u.width=n.width,document.body.appendChild(u),a=i(u);var f=_(e,a,t);a.finish(),document.body.removeChild(u);var l=n.getContext("2d"),c=l.createImageData(n.width,n.height);c.data.set(f),l.putImageData(c,0,0),o(null,f)}catch(s){r(s),a.finish(),document.body.removeChild(u),o(s)}return null}},{"./pure/unsharp":2}],5:[function(e,n,t){"use strict";n.exports=function(n){var t=e("./resize");n.onmessage=function(e){t(e.data,function(e,t){return e?void n.postMessage({err:e}):void n.postMessage({output:t},[t.buffer])})}}},{"./resize":3}],6:[function(e,n,t){function r(e){.5>e&&(e=.5);var n=Math.exp(.527076)/e,t=Math.exp(-n),r=Math.exp(-2*n),o=(1-t)*(1-t)/(1+2*n*t-r);return a=o,u=o*(n-1)*t,f=o*(n+1)*t,l=-o*r,c=2*t,s=-r,v=(a+u)/(1-c-s),h=(f+l)/(1-c-s),new Float32Array([a,u,f,l,c,s,v,h])}function o(e,n,t,r,o,i){var a,u,f,l,c,s,v,h,d,g,m,_,p,x;for(d=0;i>d;d++){for(s=d*o,v=d,h=0,a=e[s],c=a*r[6],l=c,m=r[0],_=r[1],p=r[4],x=r[5],g=0;o>g;g++)u=e[s],f=u*m+a*_+l*p+c*x,c=l,l=f,a=u,t[h]=l,h++,s++;for(s--,h--,v+=i*(o-1),a=e[s],c=a*r[7],l=c,u=a,m=r[2],_=r[3],g=o-1;g>=0;g--)f=u*m+a*_+l*p+c*x,c=l,l=f,a=u,u=e[s],n[v]=t[h]+l,s--,h--,v-=i}}function i(e,n,t,i){if(i){var a=new Uint16Array(e.length),u=new Float32Array(Math.max(n,t)),f=r(i);o(e,a,u,f,n,t,i),o(a,e,u,f,t,n,i)}}var a,u,f,l,c,s,v,h;n.exports=i},{}],7:[function(e,n,t){var r=arguments[3],o=arguments[4],i=arguments[5],a=JSON.stringify;n.exports=function(e){for(var n,t=Object.keys(i),u=0,f=t.length;f>u;u++){var l=t[u];if(i[l].exports===e){n=l;break}}if(!n){n=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var c={},u=0,f=t.length;f>u;u++){var l=t[u];c[l]=l}o[n]=[Function(["require","module","exports"],"("+e+")(self)"),c]}var s=Math.floor(Math.pow(16,8)*Math.random()).toString(16),v={};v[n]=n,o[s]=[Function(["require"],"require("+a(n)+")(self)"),v];var h="("+r+")({"+Object.keys(o).map(function(e){return a(e)+":["+o[e][0]+","+a(o[e][1])+"]"}).join(",")+"},{},["+a(s)+"])",d=window.URL||window.webkitURL||window.mozURL||window.msURL;return new Worker(d.createObjectURL(new Blob([h],{type:"text/javascript"})))}},{}],"/":[function(e,n,t){"use strict";function r(e){return Object.prototype.toString.call(e)}function o(e){return"[object Function]"===r(e)}function i(n,r){var o,i={src:n.src,dest:null,width:0|n.width,height:0|n.height,toWidth:0|n.toWidth,toHeight:0|n.toHeight,quality:n.quality,alpha:n.alpha,unsharpAmount:n.unsharpAmount,unsharpRadius:n.unsharpRadius,unsharpThreshold:n.unsharpThreshold};return u||(t.WW=!1),u&&t.WW?(t.debug("Resize buffer in WebWorker"),o=e("webworkify")(h),o.onmessage=function(e){var t,i,a=n.dest,u=e.data.output;if(a)if(a.set)a.set(u);else for(t=0,i=u.length;i>t;t++)a[t]=u[t];r(e.data.err,u),o.terminate()},n.transferable?o.postMessage(i,[n.src.buffer]):o.postMessage(i),o):(t.debug("Resize buffer sync (freeze event loop)"),i.dest=n.dest,v(i,r),null)}function a(e,n,r,u){var f,l,c=e.width,v=e.height,h=n.width,g=n.height;if(o(r)&&(u=r,r={}),isNaN(r)||(r={quality:r,alpha:!1}),s||(t.WEBGL=!1),s&&t.WEBGL)return t.debug("Resize canvas with WebGL"),d(e,n,r,function(o){return o?(t.debug("WebGL resize failed, do fallback and cancel next attempts"),t.debug(o),s=!1,a(e,n,r,u)):void u()});t.debug("Resize canvas: prepare data"),f=n.getContext("2d"),l=f.createImageData(h,g);var m={src:e.getContext("2d").getImageData(0,0,c,v).data,dest:l.data,width:e.width,height:e.height,toWidth:n.width,toHeight:n.height,quality:r.quality,alpha:r.alpha,unsharpAmount:r.unsharpAmount,unsharpRadius:r.unsharpRadius,unsharpThreshold:r.unsharpThreshold,transferable:!0};return i(m,function(e){return e?void u(e):(f.putImageData(l,0,0),void u())})}var u="undefined"!=typeof window&&"Worker"in window;if(u)try{var f=e("webworkify")(function(){});f.terminate()}catch(l){u=!1}var c,s=!1;try{"undefined"!=typeof document&&"undefined"!=typeof window&&window.WebGLRenderingContext&&(c=document.createElement("canvas"),(c.getContext("webgl")||c.getContext("experimental-webgl"))&&(s=!0))}catch(l){}finally{c=null}var v=e("./lib/resize"),h=e("./lib/resize_worker"),d=e("./lib/resize_webgl");t.resizeBuffer=i,t.resizeCanvas=a,t.WW=u,t.WEBGL=!1,t.debug=function(){}},{"./lib/resize":3,"./lib/resize_webgl":4,"./lib/resize_worker":5,webworkify:7}]},{},[])("/")});
