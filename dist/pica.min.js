/* pica 1.0.8 nodeca/pica */
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r;r="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,r.pica=t()}}(function(){return function t(r,e,n){function o(a,u){if(!e[a]){if(!r[a]){var f="function"==typeof require&&require;if(!u&&f)return f(a,!0);if(i)return i(a,!0);var s=new Error("Cannot find module '"+a+"'");throw s.code="MODULE_NOT_FOUND",s}var h=e[a]={exports:{}};r[a][0].call(h.exports,function(t){var e=r[a][1][t];return o(e?e:t)},h,h.exports,t,r,e,n)}return e[a].exports}for(var i="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(t,r,e){"use strict";function n(t,r,e,n,o){var a,s,h,l,c,d,p,w=0,g=i,v=u;if(d=0,p=0,r>=v&&e>=v&&n>r+v&&o>e+v){for(s=0;3>s;s++)for(a=0;3>a;a++)h=r+a-v,l=e+s-v,p+=t[h+l*n]*g[w++];return(p-p%f)/f}for(s=0;3>s;s++)for(a=0;3>a;a++)h=r+a-v,l=e+s-v,h>=0&&n>h&&l>=0&&o>l&&(c=g[w],d+=c,p+=t[h+l*n]*c),w++;return(p-p%d)/d|0}function o(t,r,e){var o,i,a=new Uint16Array(t.length);for(o=0;r>o;o++)for(i=0;e>i;i++)a[i*r+o]=n(t,o,i,r,e);return a}for(var i=new Uint8Array([1,2,1,2,4,2,1,2,1]),a=Math.floor(Math.sqrt(i.length)),u=Math.floor(a/2),f=0,s=0;s<i.length;s++)f+=i[s];r.exports=o},{}],2:[function(t,r,e){"use strict";function n(t){return 0>t?0:t>255?255:t}function o(t){return Math.floor(t*c)}function i(t,r,e){var n,i,a,u,f,s,h,l,c,p,w,g,v,y,M,m,b,x=d[t].filter,q=e/r,A=1/q,U=Math.min(1,q),k=d[t].win/U,z=Math.floor(2*(k+1)),W=new Int16Array((z+2)*e),j=0;for(n=0;e>n;n++){for(i=(n+.5)*A,a=Math.max(0,Math.floor(i-k)),u=Math.min(r-1,Math.ceil(i+k)),f=u-a+1,s=new Float32Array(f),h=new Int16Array(f),l=0,p=a,w=0;u>=p;p++,w++)g=x((p+.5-i)*U),l+=g,s[w]=g;for(c=0,w=0;w<s.length;w++)v=o(s[w]/l),c+=v,h[w]=v;for(h[e>>1]+=o(1)-c,y=0;y<h.length&&0===h[y];)y++;if(y<h.length){for(M=h.length-1;M>0&&0===h[M];)M--;m=a+y,b=M-y+1,W[j++]=m,W[j++]=b,W.set(h.subarray(y,M+1),j),j+=b}else W[j++]=0,W[j++]=0}return W}function a(t,r,e,o,i,a){var u,f,s,h,l,c,d,p,w,g,v,y=0,M=0;for(w=0;o>w;w++){for(l=0,g=0;i>g;g++){for(c=a[l++],d=a[l++],p=y+4*c|0,u=f=s=h=0;d>0;d--)v=a[l++],h=h+v*t[p+3]|0,s=s+v*t[p+2]|0,f=f+v*t[p+1]|0,u=u+v*t[p]|0,p=p+4|0;r[M+3]=n(h+8192>>14),r[M+2]=n(s+8192>>14),r[M+1]=n(f+8192>>14),r[M]=n(u+8192>>14),M=M+4*o|0}M=4*(w+1)|0,y=(w+1)*e*4|0}}function u(t,r,e,o,i,a){var u,f,s,h,l,c,d,p,w,g,v,y=0,M=0;for(w=0;o>w;w++){for(l=0,g=0;i>g;g++){for(c=a[l++],d=a[l++],p=y+4*c|0,u=f=s=h=0;d>0;d--)v=a[l++],h=h+v*t[p+3]|0,s=s+v*t[p+2]|0,f=f+v*t[p+1]|0,u=u+v*t[p]|0,p=p+4|0;r[M+3]=n(h+8192>>14),r[M+2]=n(s+8192>>14),r[M+1]=n(f+8192>>14),r[M]=n(u+8192>>14),M=M+4*o|0}M=4*(w+1)|0,y=(w+1)*e*4|0}}function f(t,r,e){for(var n=3,o=r*e*4|0;o>n;)t[n]=255,n=n+4|0}function s(t){var r=t.src,e=t.width,n=t.height,o=t.toWidth,s=t.toHeight,l=t.dest||new Uint8Array(o*s*4),c="undefined"==typeof t.quality?3:t.quality,d=t.alpha||!1,p="undefined"==typeof t.unsharpAmount?0:0|t.unsharpAmount,w="undefined"==typeof t.unsharpThreshold?0:0|t.unsharpThreshold;if(1>e||1>n||1>o||1>s)return[];var g=i(c,e,o),v=i(c,n,s),y=new Uint8Array(o*n*4);return a(r,y,e,n,o,g),u(y,l,n,o,s,v),d||f(l,o,s),p&&h(l,o,s,p,1,w),l}var h=t("./unsharp"),l=14,c=1<<l,d=[{win:.5,filter:function(t){return t>=-.5&&.5>t?1:0}},{win:1,filter:function(t){if(-1>=t||t>=1)return 0;if(t>-1.1920929e-7&&1.1920929e-7>t)return 1;var r=t*Math.PI;return Math.sin(r)/r*(.54+.46*Math.cos(r/1))}},{win:2,filter:function(t){if(-2>=t||t>=2)return 0;if(t>-1.1920929e-7&&1.1920929e-7>t)return 1;var r=t*Math.PI;return Math.sin(r)/r*Math.sin(r/2)/(r/2)}},{win:3,filter:function(t){if(-3>=t||t>=3)return 0;if(t>-1.1920929e-7&&1.1920929e-7>t)return 1;var r=t*Math.PI;return Math.sin(r)/r*Math.sin(r/3)/(r/3)}}];r.exports=s},{"./unsharp":3}],3:[function(t,r,e){"use strict";function n(t){return 0>t?0:t>255?255:t}function o(t,r,e){var n,o,i=r*e,a=new Uint16Array(i);for(n=0,o=0;i>n;n++)a[n]=7471*t[o+2]+38470*t[o+1]+19595*t[o]>>>8,o=o+4|0;return a}function i(t,r,e,i,u,f){var s,h,l,c,d,p=0,w=Math.floor(256*i/50),g=o(t,r,e),v=a(g,r,e,1),y=f<<8,M=0;for(h=0;e>h;h++)for(s=0;r>s;s++)p=g[M]-v[M],Math.abs(p)>y&&(c=65536+(p*w>>8),d=4*M,l=t[d],t[d++]=n(l*c>>16),l=t[d],t[d++]=n(l*c>>16),l=t[d],t[d]=n(l*c>>16)),M++}var a=t("./blur");r.exports=i},{"./blur":1}],4:[function(t,r,e){"use strict";var n=t("./pure/resize");r.exports=function(t,r){var e=n(t);r(null,e)}},{"./pure/resize":2}],5:[function(t,r,e){"use strict";r.exports=function(r){var e=t("./resize");r.onmessage=function(t){e(t.data,function(t,e){return t?void r.postMessage({err:t}):void r.postMessage({output:e},[e.buffer])})}}},{"./resize":4}],6:[function(t,r,e){var n=arguments[3],o=arguments[4],i=arguments[5],a=JSON.stringify;r.exports=function(t){for(var r,e=Object.keys(i),u=0,f=e.length;f>u;u++){var s=e[u];if(i[s].exports===t){r=s;break}}if(!r){r=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var h={},u=0,f=e.length;f>u;u++){var s=e[u];h[s]=s}o[r]=[Function(["require","module","exports"],"("+t+")(self)"),h]}var l=Math.floor(Math.pow(16,8)*Math.random()).toString(16),c={};c[r]=r,o[l]=[Function(["require"],"require("+a(r)+")(self)"),c];var d="("+n+")({"+Object.keys(o).map(function(t){return a(t)+":["+o[t][0]+","+a(o[t][1])+"]"}).join(",")+"},{},["+a(l)+"])",p=window.URL||window.webkitURL||window.mozURL||window.msURL;return new Worker(p.createObjectURL(new Blob([d],{type:"text/javascript"})))}},{}],"/":[function(t,r,e){"use strict";function n(t){return Object.prototype.toString.call(t)}function o(t){return"[object Function]"===n(t)}function i(r,n){var o,i={src:r.src,dest:null,width:0|r.width,height:0|r.height,toWidth:0|r.toWidth,toHeight:0|r.toHeight,quality:r.quality,alpha:r.alpha,unsharpAmount:r.unsharpAmount,unsharpThreshold:r.unsharpThreshold};return u&&e.WW?(o=t("webworkify")(l),o.onmessage=function(t){var e,i,a=r.dest,u=t.data.output;if(a)if(a.set)a.set(u);else for(e=0,i=u.length;i>e;e++)a[e]=u[e];n(t.data.err,u),o.terminate()},r.transferable?o.postMessage(i,[r.src.buffer]):o.postMessage(i),o):(i.dest=r.dest,h(i,n),null)}function a(t,r,e,n){var a=t.width,u=t.height,f=r.width,s=r.height;o(e)&&(n=e,e={}),isNaN(e)||(e={quality:e,alpha:!1});var h=r.getContext("2d"),l=h.getImageData(0,0,f,s),c={src:t.getContext("2d").getImageData(0,0,a,u).data,dest:l.data,width:t.width,height:t.height,toWidth:r.width,toHeight:r.height,quality:e.quality,alpha:e.alpha,unsharpAmount:e.unsharpAmount,unsharpThreshold:e.unsharpThreshold,transferable:!0};return i(c,function(t){return t?void n(t):(h.putImageData(l,0,0),void n())})}var u="undefined"!=typeof window&&"Worker"in window;if(u)try{var f=t("webworkify")(function(){});f.terminate()}catch(s){u=!1}var h=t("./lib/resize"),l=t("./lib/resize_worker");e.resizeBuffer=i,e.resizeCanvas=a,e.WW=u},{"./lib/resize":4,"./lib/resize_worker":5,webworkify:6}]},{},[])("/")});
