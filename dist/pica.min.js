/* pica 1.1.1 nodeca/pica */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n;n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,n.pica=e()}}(function(){return function e(n,t,i){function r(a,u){if(!t[a]){if(!n[a]){var f="function"==typeof require&&require;if(!u&&f)return f(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=t[a]={exports:{}};n[a][0].call(c.exports,function(e){var t=n[a][1][e];return r(t?t:e)},c,c.exports,e,n,t,i)}return t[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(e,n,t){"use strict";function i(e){return 0>e?0:e>255?255:e}function r(e){return Math.floor(e*h)}function o(e,n,t){var i,o,a,u,f,l,c,s,h,d,g,m,_,p,x,E,w,b=v[e].filter,T=t/n,R=1/T,y=Math.min(1,T),z=v[e].win/y,S=Math.floor(2*(z+1)),A=new Int16Array((S+2)*t),F=0;for(i=0;t>i;i++){for(o=(i+.5)*R,a=Math.max(0,Math.floor(o-z)),u=Math.min(n-1,Math.ceil(o+z)),f=u-a+1,l=new Float32Array(f),c=new Int16Array(f),s=0,d=a,g=0;u>=d;d++,g++)m=b((d+.5-o)*y),s+=m,l[g]=m;for(h=0,g=0;g<l.length;g++)_=r(l[g]/s),h+=_,c[g]=_;for(c[t>>1]+=r(1)-h,p=0;p<c.length&&0===c[p];)p++;if(p<c.length){for(x=c.length-1;x>0&&0===c[x];)x--;E=a+p,w=x-p+1,A[F++]=E,A[F++]=w,A.set(c.subarray(p,x+1),F),F+=w}else A[F++]=0,A[F++]=0}return A}function a(e,n,t,r,o,a){var u,f,l,c,s,h,v,d,g,m,_,p=0,x=0;for(g=0;r>g;g++){for(s=0,m=0;o>m;m++){for(h=a[s++],v=a[s++],d=p+4*h|0,u=f=l=c=0;v>0;v--)_=a[s++],c=c+_*e[d+3]|0,l=l+_*e[d+2]|0,f=f+_*e[d+1]|0,u=u+_*e[d]|0,d=d+4|0;n[x+3]=i(c+8192>>14),n[x+2]=i(l+8192>>14),n[x+1]=i(f+8192>>14),n[x]=i(u+8192>>14),x=x+4*r|0}x=4*(g+1)|0,p=(g+1)*t*4|0}}function u(e,n,t,r,o,a){var u,f,l,c,s,h,v,d,g,m,_,p=0,x=0;for(g=0;r>g;g++){for(s=0,m=0;o>m;m++){for(h=a[s++],v=a[s++],d=p+4*h|0,u=f=l=c=0;v>0;v--)_=a[s++],c=c+_*e[d+3]|0,l=l+_*e[d+2]|0,f=f+_*e[d+1]|0,u=u+_*e[d]|0,d=d+4|0;n[x+3]=i(c+8192>>14),n[x+2]=i(l+8192>>14),n[x+1]=i(f+8192>>14),n[x]=i(u+8192>>14),x=x+4*r|0}x=4*(g+1)|0,p=(g+1)*t*4|0}}function f(e,n,t){for(var i=3,r=n*t*4|0;r>i;)e[i]=255,i=i+4|0}function l(e){var n=e.src,t=e.width,i=e.height,r=e.toWidth,l=e.toHeight,s=e.dest||new Uint8Array(r*l*4),h="undefined"==typeof e.quality?3:e.quality,v=e.alpha||!1,d="undefined"==typeof e.unsharpAmount?0:0|e.unsharpAmount,g="undefined"==typeof e.unsharpRadius?0:e.unsharpRadius,m="undefined"==typeof e.unsharpThreshold?0:0|e.unsharpThreshold;if(1>t||1>i||1>r||1>l)return[];var _=o(h,t,r),p=o(h,i,l),x=new Uint8Array(r*i*4);return a(n,x,t,i,r,_),u(x,s,i,r,l,p),v||f(s,r,l),d&&c(s,r,l,d,g,m),s}var c=e("./unsharp"),s=14,h=1<<s,v=[{win:.5,filter:function(e){return e>=-.5&&.5>e?1:0}},{win:1,filter:function(e){if(-1>=e||e>=1)return 0;if(e>-1.1920929e-7&&1.1920929e-7>e)return 1;var n=e*Math.PI;return Math.sin(n)/n*(.54+.46*Math.cos(n/1))}},{win:2,filter:function(e){if(-2>=e||e>=2)return 0;if(e>-1.1920929e-7&&1.1920929e-7>e)return 1;var n=e*Math.PI;return Math.sin(n)/n*Math.sin(n/2)/(n/2)}},{win:3,filter:function(e){if(-3>=e||e>=3)return 0;if(e>-1.1920929e-7&&1.1920929e-7>e)return 1;var n=e*Math.PI;return Math.sin(n)/n*Math.sin(n/3)/(n/3)}}];n.exports=l},{"./unsharp":2}],2:[function(e,n,t){"use strict";function i(e,n,t){for(var i,r,o,a,u,f=n*t,l=new Uint16Array(f),c=0;f>c;c++)i=e[4*c],r=e[4*c+1],o=e[4*c+2],u=i>=r&&i>=o?i:r>=o&&r>=i?r:o,a=r>=i&&o>=i?i:o>=r&&i>=r?r:o,l[c]=257*(u+a)>>1;return l}function r(e,n,t,r,a,u){var f,l,c,s,h,v,d,g,m,_,p,x,E;if(!(0===r||.5>a)){var w=i(e,n,t),b=new Uint16Array(w);o(b,n,t,a);for(var T=r/100*4096+.5|0,R=257*u|0,y=n*t,z=0;y>z;z++)x=2*(w[z]-b[z]),Math.abs(x)>=R&&(E=4*z,f=e[E],l=e[E+1],c=e[E+2],g=f>=l&&f>=c?f:l>=f&&l>=c?l:c,d=l>=f&&c>=f?f:f>=l&&c>=l?l:c,v=257*(g+d)>>1,d===g?s=h=0:(h=32767>=v?4095*(g-d)/(g+d)|0:4095*(g-d)/(510-g-d)|0,s=f===g?65535*(l-c)/(6*(g-d))|0:l===g?21845+(65535*(c-f)/(6*(g-d))|0):43690+(65535*(f-l)/(6*(g-d))|0)),v+=T*x+2048>>12,v>65535?v=65535:0>v&&(v=0),0===h?f=l=c=v>>8:(_=32767>=v?v*(4096+h)+2048>>12:v+((65535-v)*h+2048>>12),m=2*v-_>>8,_>>=8,p=s+21845&65535,f=p>=43690?m:p>=32767?m+(6*(_-m)*(43690-p)+32768>>16):p>=10922?_:m+(6*(_-m)*p+32768>>16),p=65535&s,l=p>=43690?m:p>=32767?m+(6*(_-m)*(43690-p)+32768>>16):p>=10922?_:m+(6*(_-m)*p+32768>>16),p=s-21845&65535,c=p>=43690?m:p>=32767?m+(6*(_-m)*(43690-p)+32768>>16):p>=10922?_:m+(6*(_-m)*p+32768>>16)),e[E]=f,e[E+1]=l,e[E+2]=c)}}var o=e("glur/mono16");n.exports=r,n.exports.lightness=i},{"glur/mono16":6}],3:[function(e,n,t){"use strict";var i=e("./pure/resize");n.exports=function(e,n){var t=i(e);n(null,t)}},{"./pure/resize":1}],4:[function(e,n,t){"use strict";function i(e){try{(window.console.error||window.console.log).call(window.console,e)}catch(n){}}function r(e){var n=e.getError();if(n!==e.NO_ERROR){var t="gl error "+n;throw t}}function o(e){return e.getContext("webgl")||e.getContext("experimental-webgl")}function a(e,n,t){var r=e.createShader(n);return e.shaderSource(r,t),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS)?r:(i("Shader compile error: "+e.getShaderInfoLog(r)+". Source: `"+t+"`"),e.deleteShader(r),null)}function u(e,n,t,r){var o=e.createProgram();return n.forEach(function(n){e.attachShader(o,n)}),t&&t.forEach(function(n,t){e.bindAttribLocation(o,r?r[t]:t,n)}),e.linkProgram(o),e.getProgramParameter(o,e.LINK_STATUS)?o:(i("Program linking error: "+e.getProgramInfoLog(o)),e.deleteProgram(o),null)}function f(e,n,t){var i=a(e,e.VERTEX_SHADER,n),o=a(e,e.FRAGMENT_SHADER,t),f=u(e,[i,o]);return r(e),f}function l(){Object.keys(w).length||(w["#vsh-basic"]="precision highp float;\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\n\nuniform vec2 u_resolution;\n\nvarying vec2 v_texCoord;\n\nvoid main() {\n   vec2 clipSpace = a_position / u_resolution * 2.0 - 1.0;\n\n   gl_Position = vec4(clipSpace, 0, 1);\n   v_texCoord = a_texCoord;\n}\n",w["#fsh-simple-texture"]="precision highp float;\nuniform sampler2D u_image;\n\nvarying vec2 v_texCoord;\n\nvoid main() {\n   gl_FragColor = texture2D(u_image, v_texCoord);\n}\n",w["#fsh-box-1d-covolve-horizontal"]="precision highp float;\nuniform vec2 u_resolution;\nuniform sampler2D u_image;\nuniform vec2 u_imageSize;\nuniform float u_winSize;\n\nvarying vec2 v_texCoord;\n\n#define sinc(a) (sin(a)/a)\n#define M_PI 3.1415926535897932384626433832795\n\nvoid main() {\n  vec2 pixel = vec2(1.) / u_imageSize;\n  gl_FragColor = vec4(0.);\n\n  float total = 0.;\n  float scale = u_imageSize.x / u_resolution.x;\n  float count = u_winSize * scale * 2.;\n  for (int i = 0; i < 1024*8; i++) {\n    if (float(i) >= count) {\n      break;\n    }\n    float k = float(i) - (count / 2.);\n    vec2 offset = vec2(pixel.x * k, 0.);\n    vec4 c = texture2D(u_image, v_texCoord+offset);\n    float x = k / scale; // max [-3, 3]\n    float b = (x >= -0.5 && x < 0.5) ? 1.0 : 0.0;\n    if (x > -1.19209290E-07 && x < 1.19209290E-07) { \n      b = 1.;\n    }\n    total += b;\n    c *= vec4(b);\n    gl_FragColor += c;\n  }\n  gl_FragColor /= vec4(total);\n}\n",w["#fsh-box-1d-covolve-vertical"]="precision highp float;\nuniform vec2 u_resolution;\nuniform sampler2D u_image;\nuniform vec2 u_imageSize;\nuniform float u_winSize;\n\nvarying vec2 v_texCoord;\n\n#define sinc(a) (sin(a)/a)\n#define M_PI 3.1415926535897932384626433832795\n\nvoid main() {\n  vec2 pixel = vec2(1.) / u_imageSize;\n  gl_FragColor = vec4(0.);\n\n  float total = 0.;\n  float scale = u_imageSize.y / u_resolution.y;\n  float count = u_winSize * scale * 2.;\n  for (int i = 0; i < 1024*8; i++) {\n    if (float(i) >= count) {\n      break;\n    }\n    float k = float(i) - (count / 2.);\n    vec2 offset = vec2(0., pixel.y * k);\n    vec4 c = texture2D(u_image, v_texCoord+offset);\n    float x = k / scale; // max [-3, 3]\n    float b = (x >= -0.5 && x < 0.5) ? 1.0 : 0.0;\n    if (x > -1.19209290E-07 && x < 1.19209290E-07) { \n      b = 1.;\n    }\n    total += b;\n    c *= vec4(b);\n    gl_FragColor += c;\n  }\n  gl_FragColor /= vec4(total);\n}\n",w["#fsh-hamming-1d-covolve-horizontal"]="precision highp float;\nuniform vec2 u_resolution;\nuniform sampler2D u_image;\nuniform vec2 u_imageSize;\nuniform float u_winSize;\n\nvarying vec2 v_texCoord;\n\n#define sinc(a) (sin(a)/a)\n#define M_PI 3.1415926535897932384626433832795\n\nvoid main() {\n  vec2 pixel = vec2(1.) / u_imageSize;\n  gl_FragColor = vec4(0.);\n\n  float total = 0.;\n  float scale = u_imageSize.x / u_resolution.x;\n  float count = u_winSize * scale * 2.;\n  for (int i = 0; i < 1024*8; i++) {\n    if (float(i) >= count) {\n      break;\n    }\n    float k = float(i) - (count / 2.);\n    vec2 offset = vec2(pixel.x * k, 0.);\n    vec4 c = texture2D(u_image, v_texCoord+offset);\n    float x = k / scale; // max [-3, 3]\n    float xpi = x * M_PI;\n    float b = sinc(xpi) * (0.54 + 0.46 * cos(xpi));\n    if (x > -1.19209290E-07 && x < 1.19209290E-07) { \n      b = 1.;\n    }\n    total += b;\n    c *= vec4(b);\n    gl_FragColor += c;\n  }\n  gl_FragColor /= vec4(total);\n}\n",w["#fsh-hamming-1d-covolve-vertical"]="precision highp float;\nuniform vec2 u_resolution;\nuniform sampler2D u_image;\nuniform vec2 u_imageSize;\nuniform float u_winSize;\n\nvarying vec2 v_texCoord;\n\n#define sinc(a) (sin(a)/a)\n#define M_PI 3.1415926535897932384626433832795\n\nvoid main() {\n  vec2 pixel = vec2(1.) / u_imageSize;\n  gl_FragColor = vec4(0.);\n\n  float total = 0.;\n  float scale = u_imageSize.y / u_resolution.y;\n  float count = u_winSize * scale * 2.;\n  for (int i = 0; i < 1024*8; i++) {\n    if (float(i) >= count) {\n      break;\n    }\n    float k = float(i) - (count / 2.);\n    vec2 offset = vec2(0., pixel.y * k);\n    vec4 c = texture2D(u_image, v_texCoord+offset);\n    float x = k / scale; // max [-3, 3]\n    float xpi = x * M_PI;\n    float b = sinc(xpi) * (0.54 + 0.46 * cos(xpi));\n     if (x > -1.19209290E-07 && x < 1.19209290E-07) { \n      b = 1.;\n    }\n    total += b;\n    c *= vec4(b);\n    gl_FragColor += c;\n  }\n  gl_FragColor /= vec4(total);\n}\n",w["#fsh-lanczos-1d-covolve-horizontal"]="precision highp float;\nuniform vec2 u_resolution;\nuniform sampler2D u_image;\nuniform vec2 u_imageSize;\nuniform float u_winSize;\n\nvarying vec2 v_texCoord;\n\n#define sinc(a) (sin(a)/a)\n#define M_PI 3.1415926535897932384626433832795\n\nvoid main() {\n  vec2 pixel = vec2(1.) / u_imageSize;\n  gl_FragColor = vec4(0.);\n\n  float total = 0.;\n  float scale = u_imageSize.x / u_resolution.x;\n  float count = u_winSize * scale * 2.;\n  for (int i = 0; i < 1024*8; i++) {\n    if (float(i) >= count) {\n      break;\n    }\n    float k = float(i) - (count / 2.);\n    vec2 offset = vec2(pixel.x * k, 0.);\n    vec4 c = texture2D(u_image, v_texCoord+offset);\n    float x = k / scale; // max [-3, 3]\n    float xpi = x * M_PI;\n    float b = sinc(xpi) * sinc(xpi / u_winSize);\n    if (x > -1.19209290E-07 && x < 1.19209290E-07) { \n      b = 1.;\n    }\n    total += b;\n    c *= vec4(b);\n    gl_FragColor += c;\n  }\n  gl_FragColor /= vec4(total);\n}\n",w["#fsh-lanczos-1d-covolve-vertical"]="precision highp float;\nuniform vec2 u_resolution;\nuniform sampler2D u_image;\nuniform vec2 u_imageSize;\nuniform float u_winSize;\n\nvarying vec2 v_texCoord;\n\n#define sinc(a) (sin(a)/a)\n#define M_PI 3.1415926535897932384626433832795\n\nvoid main() {\n  vec2 pixel = vec2(1.) / u_imageSize;\n  gl_FragColor = vec4(0.);\n\n  float total = 0.;\n  float scale = u_imageSize.y / u_resolution.y;\n  float count = u_winSize * scale * 2.;\n  for (int i = 0; i < 1024*8; i++) {\n    if (float(i) >= count) {\n      break;\n    }\n    float k = float(i) - (count / 2.);\n    vec2 offset = vec2(0., pixel.y * k);\n    vec4 c = texture2D(u_image, v_texCoord+offset);\n    float x = k / scale; // max [-3, 3]\n    float xpi = x * M_PI;\n    float b = sinc(xpi) * sinc(xpi / u_winSize);\n    if (x > -1.19209290E-07 && x < 1.19209290E-07) { \n      b = 1.;\n    }\n    total += b;\n    c *= vec4(b);\n    gl_FragColor += c;\n  }\n  gl_FragColor /= vec4(total);\n}\n")}function c(e,n,t){var i=w[n],r=w[t];return f(e,i,r)}function s(e,n,t,i,o){var a=e.getAttribLocation(n,t);e.bindBuffer(e.ARRAY_BUFFER,e.createBuffer()),e.bufferData(e.ARRAY_BUFFER,new Float32Array(i),e.STATIC_DRAW),e.enableVertexAttribArray(a),e.vertexAttribPointer(a,o.elementSize,e.FLOAT,!1,0,0),r(e)}function h(e,n,t){var i=e.createTexture();return e.activeTexture(e.TEXTURE0+n),e.bindTexture(e.TEXTURE_2D,i),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t),r(e),i}function v(e,n,t,i){var r=e.getUniformLocation(n,t);e.uniform1i(r,i)}function d(e,n,t,i){var r=e.getUniformLocation(n,t);e.uniform1f(r,i)}function g(e,n,t,i,r){var o=e.getUniformLocation(n,t);e.uniform2f(o,i,r)}function m(e,n,t,i){var r=e,o=e+t,a=n,u=n+i;return[r,a,o,a,r,u,r,u,o,a,o,u]}function _(e,n,t,i){var o=e.createTexture();return e.activeTexture(e.TEXTURE0+n),e.bindTexture(e.TEXTURE_2D,o),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t,i,0,e.RGBA,e.UNSIGNED_BYTE,null),r(e),o}function p(e,n,t,i){var o=_(e,n,t,i),a=e.getParameter(e.FRAMEBUFFER_BINDING),u=e.createFramebuffer();return e.bindFramebuffer(e.FRAMEBUFFER,u),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,o,0),r(e),{fbo:u,texture:o,oldFbo:a}}function x(e,n,t){function i(e,t,i,o,f,l,h,_){var x={width:h,height:_};a=c(n,"#vsh-basic",f),u=a,n.useProgram(u),d(n,u,"u_winSize",l),v(n,u,"u_image",e),g(n,u,"u_imageSize",t,i),g(n,u,"u_resolution",x.width,x.height),s(n,u,"a_texCoord",[0,0,1,0,0,1,0,1,1,0,1,1],{elementSize:2}),s(n,u,"a_position",m(0,0,x.width,x.height),{elementSize:2}),n.viewport(0,0,x.width,x.height);var E=p(n,o,x.width,x.height);return n.viewport(0,0,x.width,x.height),n.drawArrays(n.TRIANGLES,0,6),n.bindFramebuffer(n.FRAMEBUFFER,E.oldFbo),r(n),E}n.viewport(0,0,n.canvas.width,n.canvas.height);var o,a,u,f={width:e.width,height:e.height};l(),o=c(n,"#vsh-basic","#fsh-simple-texture");var _=0;h(n,_,e);var x={width:f.width,height:f.height},w="undefined"==typeof t.quality?3:t.quality,b=2,T=3,R=[{win:.5,horizontal:"#fsh-box-1d-covolve-horizontal",vertical:"#fsh-box-1d-covolve-vertical"},{win:1,horizontal:"#fsh-hamming-1d-covolve-horizontal",vertical:"#fsh-hamming-1d-covolve-vertical"},{win:2,horizontal:"#fsh-lanczos-1d-covolve-horizontal",vertical:"#fsh-lanczos-1d-covolve-vertical"},{win:3,horizontal:"#fsh-lanczos-1d-covolve-horizontal",vertical:"#fsh-lanczos-1d-covolve-vertical"}];i(_,x.width,x.height,b,R[w].horizontal,R[w].win,n.canvas.width,x.height);var y=i(b,n.canvas.width,x.height,T,R[w].vertical,R[w].win,n.canvas.width,n.canvas.height);n.viewport(0,0,n.canvas.width,n.canvas.height);var z=T;u=o,n.useProgram(u),v(n,u,"u_image",z),g(n,u,"u_resolution",n.canvas.width,n.canvas.height),s(n,u,"a_texCoord",[0,0,1,0,0,1,0,1,1,0,1,1],{elementSize:2}),s(n,u,"a_position",m(0,0,n.canvas.width,n.canvas.height),{elementSize:2}),n.drawArrays(n.TRIANGLES,0,6),r(n),n.flush();var S=n.createFramebuffer();if(n.bindFramebuffer(n.FRAMEBUFFER,S),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,y.texture,0),n.checkFramebufferStatus(n.FRAMEBUFFER)===n.FRAMEBUFFER_COMPLETE){var A=n.canvas.width,F=n.canvas.height,C=new Uint8Array(A*F*4);n.readPixels(0,0,A,F,n.RGBA,n.UNSIGNED_BYTE,C);var M=A,U=F,D=C,P="undefined"==typeof t.unsharpAmount?0:0|t.unsharpAmount,k="undefined"==typeof t.unsharpRadius?0:t.unsharpRadius,I="undefined"==typeof t.unsharpThreshold?0:0|t.unsharpThreshold;return P&&E(D,M,U,P,k,I),D}}var E=e("./pure/unsharp"),w={};n.exports=function(e,n,t,r){var a,u;try{u=document.createElement("canvas"),u.id="pica-webgl-temporarry-canvas",u.height=n.height,u.width=n.width,document.body.appendChild(u),a=o(u);var f=x(e,a,t);a.finish(),document.body.removeChild(u);var l,c,s,h,v=n.width,d=n.height,g=n.getContext("2d"),m=g.getImageData(0,0,v,d);for(c=0;d>c;c++)for(l=0;v>l;l++)s=4*(l+c*v),h=4*(l+(d-c-1)*v),m.data[s]=f[h],m.data[s+1]=f[h+1],m.data[s+2]=f[h+2],m.data[s+3]=f[h+3];g.putImageData(m,0,0),r(null,f)}catch(_){i(_),a.finish(),document.body.removeChild(u),r(_)}return null}},{"./pure/unsharp":2}],5:[function(e,n,t){"use strict";n.exports=function(n){var t=e("./resize");n.onmessage=function(e){t(e.data,function(e,t){return e?void n.postMessage({err:e}):void n.postMessage({output:t},[t.buffer])})}}},{"./resize":3}],6:[function(e,n,t){function i(e){.5>e&&(e=.5);var n=Math.exp(.527076)/e,t=Math.exp(-n),i=Math.exp(-2*n),r=(1-t)*(1-t)/(1+2*n*t-i);return a=r,u=r*(n-1)*t,f=r*(n+1)*t,l=-r*i,c=2*t,s=-i,h=(a+u)/(1-c-s),v=(f+l)/(1-c-s),new Float32Array([a,u,f,l,c,s,h,v])}function r(e,n,t,i,r,o){var a,u,f,l,c,s,h,v,d,g,m,_,p,x;for(d=0;o>d;d++){for(s=d*r,h=d,v=0,a=e[s],c=a*i[6],l=c,m=i[0],_=i[1],p=i[4],x=i[5],g=0;r>g;g++)u=e[s],f=u*m+a*_+l*p+c*x,c=l,l=f,a=u,t[v]=l,v++,s++;for(s--,v--,h+=o*(r-1),a=e[s],c=a*i[7],l=c,u=a,m=i[2],_=i[3],g=r-1;g>=0;g--)f=u*m+a*_+l*p+c*x,c=l,l=f,a=u,u=e[s],n[h]=t[v]+l,s--,v--,h-=o}}function o(e,n,t,o){if(o){var a=new Uint16Array(e.length),u=new Float32Array(Math.max(n,t)),f=i(o);r(e,a,u,f,n,t,o),r(a,e,u,f,t,n,o)}}var a,u,f,l,c,s,h,v;n.exports=o},{}],7:[function(e,n,t){var i=arguments[3],r=arguments[4],o=arguments[5],a=JSON.stringify;n.exports=function(e){for(var n,t=Object.keys(o),u=0,f=t.length;f>u;u++){var l=t[u];if(o[l].exports===e){n=l;break}}if(!n){n=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var c={},u=0,f=t.length;f>u;u++){var l=t[u];c[l]=l}r[n]=[Function(["require","module","exports"],"("+e+")(self)"),c]}var s=Math.floor(Math.pow(16,8)*Math.random()).toString(16),h={};h[n]=n,r[s]=[Function(["require"],"require("+a(n)+")(self)"),h];var v="("+i+")({"+Object.keys(r).map(function(e){return a(e)+":["+r[e][0]+","+a(r[e][1])+"]"}).join(",")+"},{},["+a(s)+"])",d=window.URL||window.webkitURL||window.mozURL||window.msURL;return new Worker(d.createObjectURL(new Blob([v],{type:"text/javascript"})))}},{}],"/":[function(e,n,t){"use strict";function i(e){return Object.prototype.toString.call(e)}function r(e){return"[object Function]"===i(e)}function o(n,i){var r,o={src:n.src,dest:null,width:0|n.width,height:0|n.height,toWidth:0|n.toWidth,toHeight:0|n.toHeight,quality:n.quality,alpha:n.alpha,unsharpAmount:n.unsharpAmount,unsharpRadius:n.unsharpRadius,unsharpThreshold:n.unsharpThreshold};return u||(t.WW=!1),u&&t.WW?(t.debug("Resize buffer in WebWorker"),r=e("webworkify")(v),r.onmessage=function(e){var t,o,a=n.dest,u=e.data.output;if(a)if(a.set)a.set(u);else for(t=0,o=u.length;o>t;t++)a[t]=u[t];i(e.data.err,u),r.terminate()},n.transferable?r.postMessage(o,[n.src.buffer]):r.postMessage(o),r):(t.debug("Resize buffer sync (freeze event loop)"),o.dest=n.dest,h(o,i),null)}function a(e,n,i,u){var f,l,c=e.width,h=e.height,v=n.width,g=n.height;if(r(i)&&(u=i,i={}),isNaN(i)||(i={quality:i,alpha:!1}),s||(t.WEBGL=!1),s&&t.WEBGL)return t.debug("Resize canvas with WebGL"),d(e,n,i,function(r){return r?(t.debug("WebGL resize failed, do fallback and cancel next attempts"),t.debug(r),s=!1,a(e,n,i,u)):void u()});t.debug("Resize canvas: prepare data"),f=n.getContext("2d"),l=f.getImageData(0,0,v,g);var m={src:e.getContext("2d").getImageData(0,0,c,h).data,dest:l.data,width:e.width,height:e.height,toWidth:n.width,toHeight:n.height,quality:i.quality,alpha:i.alpha,unsharpAmount:i.unsharpAmount,unsharpRadius:i.unsharpRadius,unsharpThreshold:i.unsharpThreshold,transferable:!0};return o(m,function(e){return e?void u(e):(f.putImageData(l,0,0),void u())})}var u="undefined"!=typeof window&&"Worker"in window;if(u)try{var f=e("webworkify")(function(){});f.terminate()}catch(l){u=!1}var c,s=!1;try{"undefined"!=typeof document&&"undefined"!=typeof window&&window.WebGLRenderingContext&&(c=document.createElement("canvas"),(c.getContext("webgl")||c.getContext("experimental-webgl"))&&(s=!0))}catch(l){}finally{c=null}var h=e("./lib/resize"),v=e("./lib/resize_worker"),d=e("./lib/resize_webgl");t.resizeBuffer=o,t.resizeCanvas=a,t.WW=u,t.WEBGL=!1,t.debug=function(){}},{"./lib/resize":3,"./lib/resize_webgl":4,"./lib/resize_worker":5,webworkify:7}]},{},[])("/")});
